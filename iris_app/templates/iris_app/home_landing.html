{% extends 'iris_app/base.html' %}
{% load static %}

{% block title %}Home - Grassroot IRIS{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'iris_app/css/home_landing.css' %}">
{% endblock %}

{% block content %}
<!-- Public Navigation -->
<nav class="landing-nav">
    <div class="nav-logo">
        <img src="{% static 'iris_app/img/logo.png' %}" alt="Logo" height="40">
    </div>
    <ul class="nav-links d-none d-lg-flex">
        <li><a href="#">About Us</a></li>
        <li><a href="#">Community</a></li>
        <li><a href="{% url 'challenge_list' %}">Challenges</a></li>
        <li><a href="#">FAQ</a></li>
    </ul>
    <div class="nav-auth">
        {% if request.session.iris_user_id %}
        <a href="{% url 'challenge_list' %}" class="btn-login">Dashboard</a>
        {% else %}
        <a href="{% url 'login' %}" class="btn-login">Login</a>
        {% endif %}
    </div>
</nav>

<div class="landing-container">

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1>Innovate,<br>Collaborate, Reward</h1>
            <p>Develop innovative approaches to re-engineer products, systems, or manufacturing processes.</p>
            <button class="btn btn-primary-red">Enter Platform</button>
            <div class="hero-dots mt-4">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>
    </section>

    <!-- Challenges Section -->
    <section class="section-with-vertical-header">
        <div class="vertical-header">Challenges</div>
        <div class="container-fluid">
            <div class="row g-4">
                <div class="col-md-10">
                    <div class="landing-card featured-challenge d-flex p-0 overflow-hidden">
                        {% if featured_challenge %}
                        {% if featured_challenge.challenge_icon %}
                        <img src="{{ featured_challenge.challenge_icon.url }}" alt="{{ featured_challenge.title }}"
                            class="w-40 object-fit-cover">
                        {% else %}
                        <img src="{% static 'iris_app/img/Rectangle 79.png' %}" alt="{{ featured_challenge.title }}"
                            class="w-40 object-fit-cover">
                        {% endif %}
                        <div class="p-4 flex-grow-1">
                            <h3>{{ featured_challenge.title }}</h3>
                            <p class="text-muted small">{{ featured_challenge.description|truncatewords:30 }}</p>
                            <div class="d-flex align-items-center gap-3 mt-3">
                                <span class="badge-red">{{ featured_challenge.status }}</span>
                                <a href="{% url 'submit_idea' featured_challenge.challenge_id %}"
                                    class="btn btn-sm btn-primary-red">View Details</a>
                            </div>
                        </div>
                        {% else %}
                        <img src="{% static 'iris_app/img/Rectangle 79.png' %}" alt="Smart City"
                            class="w-40 object-fit-cover">
                        <div class="p-4 flex-grow-1">
                            <h3>Smart City Traffic Management</h3>
                            <p class="text-muted small">Design an intelligent traffic control system using real-time
                                data to reduce urban congestion and improve emergency response times.</p>
                            <div class="d-flex align-items-center gap-3 mt-3">
                                <span class="badge-red">Active</span>
                                <button class="btn btn-sm btn-primary-red">View Details</button>
                            </div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                <!-- Mini card for next challenge -->
                <div class="col-md-2 d-none d-lg-block">
                    <div class="landing-card mini text-center p-3 opacity-50">
                        <h6 class="small">Next</h6>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Idea Grassroot Section -->
    <section class="section-with-vertical-header">
        <div class="vertical-header">Idea-Grassroot</div>
        <div class="container-fluid">
            <div class="row g-4">
                <div class="col-md-10">
                    <div class="landing-card featured-grassroot d-flex p-0 overflow-hidden bg-dark text-white">
                        <img src="{% static 'iris_app/img/Container-1.png' %}" alt="Blockchain"
                            class="w-40 object-fit-cover">
                        <div class="p-4 flex-grow-1">
                            <h3>Blockchain for Supply Chain</h3>
                            <p class="text-light opacity-75 small">Leverage blockchain technology to provide end-to-end
                                transparency in Global logistics.</p>
                            <div class="d-flex align-items-center gap-3 mt-3">
                                <span class="badge bg-light text-dark small">New</span>
                                <button class="btn btn-sm btn-outline-light rounded-pill">Explore</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Rewards & Achievements -->
    <section class="rewards-section">
        <h4 class="mb-4">Rewards & Achievements</h4>
        <div class="row g-4">
            <div class="col-md-2 col-6">
                <div class="reward-card">
                    <img src="{% static 'iris_app/icon/Icon-1.svg' %}" alt="Badge" class="mb-3" width="40">
                    <h6 class="small mb-1">Innovation Leader</h6>
                    <span class="text-warning small text-nowrap">★ 500 Pts</span>
                </div>
            </div>
            <div class="col-md-2 col-6">
                <div class="reward-card">
                    <img src="{% static 'iris_app/icon/Icon-2.svg' %}" alt="Badge" class="mb-3" width="40">
                    <h6 class="small mb-1">Community Expert</h6>
                    <span class="text-warning small text-nowrap">★ 300 Pts</span>
                </div>
            </div>
            <div class="col-md-2 col-6">
                <div class="reward-card">
                    <img src="{% static 'iris_app/icon/Icon-3.svg' %}" alt="Badge" class="mb-3" width="40">
                    <h6 class="small mb-1">Top Contributor</h6>
                    <span class="text-warning small text-nowrap">★ 450 Pts</span>
                </div>
            </div>
            <div class="col-md-2 col-6">
                <div class="reward-card">
                    <img src="{% static 'iris_app/icon/Icon-4.svg' %}" alt="Badge" class="mb-3" width="40">
                    <h6 class="small mb-1">Rising Star</h6>
                    <span class="text-warning small text-nowrap">★ 200 Pts</span>
                </div>
            </div>
            <div class="col-md-2 col-6">
                <div class="reward-card">
                    <img src="{% static 'iris_app/icon/Icon-5.svg' %}" alt="Badge" class="mb-3" width="40">
                    <h6 class="small mb-1">Master Minds</h6>
                    <span class="text-warning small text-nowrap">★ 600 Pts</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Leaderboard -->
    <section class="leaderboard-section mb-5">
        <h2 class="text-center mb-5">Leaderboard</h2>
        <div class="top-rankers">
            <div class="text-center">
                <img src="{% static 'iris_app/img/logo.png' %}" class="ranker-avatar" alt="User">
                <p class="mb-0 mt-2 fw-bold">John Doe</p>
                <span class="badge bg-secondary">2nd Place</span>
            </div>
            <div class="text-center pb-4">
                <img src="{% static 'iris_app/img/logo.png' %}" class="ranker-avatar rank-1" alt="User">
                <p class="mb-0 mt-2 fw-bold fs-5">Alice Vance</p>
                <span class="badge bg-warning text-dark">1st Place</span>
            </div>
            <div class="text-center">
                <img src="{% static 'iris_app/img/logo.png' %}" class="ranker-avatar" alt="User">
                <p class="mb-0 mt-2 fw-bold">Sarah Lee</p>
                <span class="badge bg-secondary">3rd Place</span>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead>
                    <tr class="table-dark">
                        <th>Rank</th>
                        <th>Innovator</th>
                        <th>Category</th>
                        <th>Points</th>
                        <th>Submissions</th>
                        <th>Level</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>4</td>
                        <td><img src="{% static 'iris_app/img/logo.png' %}" width="30" class="rounded-circle me-2">
                            Rahul Kumar</td>
                        <td>AI & ML</td>
                        <td>1,250</td>
                        <td>12</td>
                        <td><span class="badge border text-dark">Gold</span></td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><img src="{% static 'iris_app/img/logo.png' %}" width="30" class="rounded-circle me-2">
                            Meera Shah</td>
                        <td>IoT</td>
                        <td>1,100</td>
                        <td>8</td>
                        <td><span class="badge border text-dark">Silver</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Community Stats -->
    <section class="community-stats mb-5">
        <div class="stat-item">
            <h2>{{ member_count|default:"2,347" }}</h2>
            <p>Total Members</p>
        </div>
        <div class="stat-item">
            <h2>{{ idea_count|default:"1,256" }}</h2>
            <p>Ideas Submitted</p>
        </div>
        <div class="stat-item">
            <h2>{{ challenge_count|default:"104" }}</h2>
            <p>Active Challenges</p>
        </div>
        <div class="stat-item">
            <h2>{{ expert_count|default:"457" }}</h2>
            <p>Community Experts</p>
        </div>
    </section>

    <!-- Impact CTA -->
    <section class="landing-card bg-light border-0 p-5 text-center mb-5">
        <div class="row align-items-center">
            <div class="col-lg-8 text-lg-start">
                <h2>Ready to make an impact?</h2>
                <p class="text-muted">Join thousands of innovators and start sharing your ideas today.</p>
            </div>
            <div class="col-lg-4 text-lg-end">
                <button class="btn btn-primary-red btn-lg">Get Started Now</button>
            </div>
        </div>
    </section>

    <!-- Testimonial -->
    <section class="testimonial-section mb-5">
        <h4 class="mb-4">Innovator Says</h4>
        <div class="testimonial-box">
            <img src="{% static 'iris_app/img/Rectangle 82.png' %}" alt="Innovator" class="testimonial-img">
            <div>
                <h5 class="mb-1">Manisha Bharadi</h5>
                <p class="text-danger small mb-3">UI/UX Designer & Researcher</p>
                <p class="opacity-75">"The IRIS platform has completely transformed how we collaborate on new ideas. The
                    rewards system is a great motivator!"</p>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="mb-5">
        <h4 class="mb-4">Your Questions?</h4>
        <div class="faq-list">
            <div class="faq-item">
                <div class="faq-question">What is the Grassroot Innovation Platform? <span>+</span></div>
            </div>
            <div class="faq-item">
                <div class="faq-question">Who can participate in the challenges? <span>+</span></div>
            </div>
            <div class="faq-item">
                <div class="faq-question">How do I earn rewards and points? <span>+</span></div>
            </div>
        </div>
    </section>

</div>

{% block extra_js %}
<script>
    // Simple FAQ toggle
    document.querySelectorAll('.faq-question').forEach(q => {
        q.addEventListener('click', () => {
            alert('FAQ content expanded (interactive demo)');
        });
    });
</script>
{% endblock %}
{% endblock %}